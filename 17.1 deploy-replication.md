create folders
documents/mongo> mkdir -p rs1 rs2 rs3

terminal 1
documents/mongo> mongod --replSet mithun --dbpath rs1 --port 27017

terminal 2
documents/mongo> mongod --replSet mithun --dbpath rs2 --port 27018

terminal 3
documents/mongo> mongod --replSet mithun --dbpath rs3 --port 27019 

terminal 4
mongo shell>rs.status()
# no replset config has been received

mongo shell>config = { _id : "mithun",
			members : [
					{_id : 0, host : "localhost:27017"},
					{_id : 1, host : "localhost:27018"},
					{_id : 2, host : "localhost:27019"}
					]
		 }





# pass config to rs.initiate()
mongo shell> rs.initiate(config);
# output :



{
	"ok" : 1,
	"operationTime" : Timestamp(1539845721, 1),
	"$clusterTime" : {
		"clusterTime" : Timestamp(1539845721, 1),
		"signature" : {
			"hash" : BinData(0,"AAAAAAAAAAAAAAAAAAAAAAAAAAA="),
			"keyId" : NumberLong(0)
		}
	}
}
# be default it takes to secondary shell(ignore) , mithun:secondary>
mithun:secondary> rs.status();
*****************
output : 
{
	"set" : "mithun",		#replica set name is mithun
	"date" : ISODate("2018-10-18T07:00:04.836Z"),
	"myState" : 1,
	"term" : NumberLong(1),
	"syncingTo" : "",
	"syncSourceHost" : "",
	"syncSourceId" : -1,
	"heartbeatIntervalMillis" : NumberLong(2000),
	"optimes" : {
		"lastCommittedOpTime" : {
			"ts" : Timestamp(1539846003, 1),
			"t" : NumberLong(1)
		},
		"readConcernMajorityOpTime" : {
			"ts" : Timestamp(1539846003, 1),
			"t" : NumberLong(1)
		},
		"appliedOpTime" : {
			"ts" : Timestamp(1539846003, 1),
			"t" : NumberLong(1)
		},
		"durableOpTime" : {
			"ts" : Timestamp(1539846003, 1),
			"t" : NumberLong(1)
		}
	},
	"lastStableCheckpointTimestamp" : Timestamp(1539845973, 1),
	"members" : [
		{
			"_id" : 0,
			"name" : "localhost:27017",
			"health" : 1,
			"state" : 1,
			"stateStr" : "PRIMARY",
			"uptime" : 894,
			"optime" : {
				"ts" : Timestamp(1539846003, 1),
				"t" : NumberLong(1)
			},
			"optimeDate" : ISODate("2018-10-18T07:00:03Z"),
			"syncingTo" : "",
			"syncSourceHost" : "",
			"syncSourceId" : -1,
			"infoMessage" : "",
			"electionTime" : Timestamp(1539845732, 1),
			"electionDate" : ISODate("2018-10-18T06:55:32Z"),
			"configVersion" : 1,
			"self" : true,
			"lastHeartbeatMessage" : ""
		},
		{
			"_id" : 1,
			"name" : "localhost:27018",
			"health" : 1,
			"state" : 2,
			"stateStr" : "SECONDARY",
			"uptime" : 283,
			"optime" : {
				"ts" : Timestamp(1539845993, 1),
				"t" : NumberLong(1)
			},
			"optimeDurable" : {
				"ts" : Timestamp(1539845993, 1),
				"t" : NumberLong(1)
			},
			"optimeDate" : ISODate("2018-10-18T06:59:53Z"),
			"optimeDurableDate" : ISODate("2018-10-18T06:59:53Z"),
			"lastHeartbeat" : ISODate("2018-10-18T07:00:02.993Z"),
			"lastHeartbeatRecv" : ISODate("2018-10-18T07:00:03.011Z"),
			"pingMs" : NumberLong(0),
			"lastHeartbeatMessage" : "",
			"syncingTo" : "localhost:27017",
			"syncSourceHost" : "localhost:27017",
			"syncSourceId" : 0,
			"infoMessage" : "",
			"configVersion" : 1
		},
		{
			"_id" : 2,
			"name" : "localhost:27019",
			"health" : 1,
			"state" : 2,
			"stateStr" : "SECONDARY",
			"uptime" : 283,
			"optime" : {
				"ts" : Timestamp(1539845993, 1),
				"t" : NumberLong(1)
			},
			"optimeDurable" : {
				"ts" : Timestamp(1539845993, 1),
				"t" : NumberLong(1)
			},
			"optimeDate" : ISODate("2018-10-18T06:59:53Z"),
			"optimeDurableDate" : ISODate("2018-10-18T06:59:53Z"),
			"lastHeartbeat" : ISODate("2018-10-18T07:00:02.993Z"),
			"lastHeartbeatRecv" : ISODate("2018-10-18T07:00:03.011Z"),
			"pingMs" : NumberLong(0),
			"lastHeartbeatMessage" : "",
			"syncingTo" : "localhost:27017",
			"syncSourceHost" : "localhost:27017",
			"syncSourceId" : 0,
			"infoMessage" : "",
			"configVersion" : 1
		}
	],
	"ok" : 1,
	"operationTime" : Timestamp(1539846003, 1),
	"$clusterTime" : {
		"clusterTime" : Timestamp(1539846003, 1),
		"signature" : {
			"hash" : BinData(0,"AAAAAAAAAAAAAAAAAAAAAAAAAAA="),
			"keyId" : NumberLong(0)
		}
	}
}

*****************
# goes to primary 
mithun:primary>


# connect to primary , create table 
# do failover 
# connect to secondary and see latest created table in primary set

********************
connect to primary throuh new terminal mongo shell, create table
connect to primary
>mithun@linux:~$ mongo --port 27017
mithun:primary> use test
mithun:PRIMARY> db.student.insert({_id:1,name:"chandrashekar"});

**********************
shutdown primary to let one of secondary set to become primary


*************************************************************************
second example
*************************************************************************
3 node replica set : same system : different ports
 : 27017
 : 27018
 : 27019
 
 
mongo -replSet replicaSunil --dbpath d:\mongod\data\db
running on 27017
first shell>mongo 


second instance:
mongo -replSet replicaSunil --dbpath d:\mongod\data\db1 --port 27018
second shell>mongo --port 27018


third instance:
mongo -replSet replicaSunil --dbpath d:\mongod\data\db2 --port 27019
third shell>mongod --port 27019

>rs.status()
# no config

firs shell
>rs.initiate()
>rs.status() - shows primary node
replicaSuni:primary>rs.add("shell2 hostname:27018")
replicaSuni:primary>rs.stautus()
replicaSuni:primary>rs.add("shell3 hostname:27019")


get hostname of shell2 and shell3
goto shell 2 : get host name
db.hostInfo()









reference link : https://www.youtube.com/watch?v=3wus5trgi0A
